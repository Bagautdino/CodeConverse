<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Code Analysis Report</title>
    <style>
        /* Add your CSS styles here */
        .severity-CRITICAL { background-color: #ff4d4d; }
        .severity-HIGH { background-color: #ff944d; }
        .severity-MEDIUM { background-color: #ffff66; }
        .severity-LOW { background-color: #b3ff66; }
        .severity-INFO { background-color: #d9d9d9; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #dddddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .collapsible { cursor: pointer; }
        .content { display: none; overflow: hidden; }
    </style>
</head>
<body>
    <h1>Code Analysis Report</h1>
    {% for file in files %}
        <div>
            <h2 class="collapsible">{{ file.file_path }}</h2>
            <div class="content">
                {% if file.issues %}
                    <table>
                        <thead>
                            <tr>
                                <th>Severity</th>
                                <th>Description</th>
                                <th>Line Number</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for issue in file.issues %}
                                <tr class="severity-{{ issue.severity }}">
                                    <td>{{ issue.severity }}</td>
                                    <td>{{ issue.description }}</td>
                                    <td>{{ issue.line }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p>No issues found.</p>
                {% endif %}
            </div>
        </div>
    {% endfor %}
    <script>
        // JavaScript for collapsible sections
        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.display === "block") {
                    content.style.display = "none";
                } else {
                    content.style.display = "block";
                }
            });
        }
    </script>
</body>
</html>
