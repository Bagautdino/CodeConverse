# AI SAST ANALYZER

**Ai Sast Analyzer** — это инструмент для анализа исходного кода на предмет уязвимостей, c использованием API GROQ и предоставления краткого отчета об этом. Программа использует модели **Groq** для обработки содержимого файлов и генерации резюме потенциальных уязвимостей в формате HTML-отчета.

Программа поддерживает следующие типы исходных файлов:
- `.py` (Python)
- `.js` (JavaScript)
- `.java` (Java)
- `.cpp`, `.c` (C/C++)
- `.cs` (C#)
- `.ts` (TypeScript)

Отчет генерируется в формате HTML, что позволяет легко просматривать результаты в любом браузере.


### Настройка

Перед запуском программы убедитесь, что у вас настроена конфигурация для работы с API Groq. Все токены можно задать в файле `config.py`.

Пример токенов в `config.py`:

```python
tokens = [
    'gemma2-9b-it',
    'llama-3.1-70b-versatile',
    'llama-3.1-8b-instant',
    'llama-guard-3-8b',
    'llama3-70b-8192',
    'llama3-8b-8192',
    'llama3-groq-70b-8192-tool-use-preview',
    'llama3-groq-8b-8192-tool-use-preview',
    'mixtral-8x7b-32768'
]
```

### Запуск

Пример базового запуска программы для анализа директории:

```bash
python main.py /path/to/source/code --output report.html --log-level INFO
```

#### Аргументы командной строки:

- `directory` — обязательный аргумент, указывающий на директорию с исходными файлами для анализа.
- `--output` — имя выходного HTML файла. По умолчанию: `report.html`.
- `--max-retries` — максимальное количество попыток при обращении к API. По умолчанию: `5`.
- `--timeout` — таймаут для каждого API-запроса в секундах. По умолчанию: `20.0`.
- `--log-level` — уровень логирования. Возможные значения: `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`. По умолчанию: `INFO`.

#### Пример:

Анализ директории `src/` с логированием уровня `DEBUG` и сохранением отчета в файл `vulnerability_report.html`:

```bash
python main.py src/ --output vulnerability_report.html --log-level DEBUG
```

## Логирование

Для удобства диагностики программа поддерживает логирование на разных уровнях детализации:
- `DEBUG` — максимально подробная информация для отладки.
- `INFO` — ключевые события и результаты.
- `WARNING` — предупреждения о возможных проблемах.
- `ERROR` — ошибки выполнения.
- `CRITICAL` — критические ошибки.

Все логи выводятся в стандартный вывод (консоль).

## Архитектура

Программа использует модульную архитектуру, разделяя основные компоненты:
- **Analyzer** — отвечает за обработку файлов и взаимодействие с API для получения результатов анализа.
- **HTMLReport** — создает отчет в формате HTML, который содержит сводку по каждому проанализированному файлу.
- **Config** — хранит конфигурационные данные, такие как токены для API.

Это позволяет легко расширять программу, добавляя новые функции или изменяя текущие.

## Ограничения

- Программа требует подключения к интернету для работы с API Groq.
- Ограничения на размер кода в одном запросе — код разбивается на блоки по 5000 символов для отправки в API.
